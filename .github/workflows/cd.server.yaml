name: "CD"

on:
  push:
    branches:
      - main
    path:
      - ".github/**"
      - "server/**"

jobs:
  validate:
    uses: ./.github/workflows/validate.yaml
    with:
      target: "server/Irrelephant.Server.Networking.sln"

  publish:
    needs: validate
    uses: ./.github/workflows/nuget.publish.yaml
    with:
      target: "server/Irrelephant.Outcast.Server.sln"
      version: "0.0.${{ github.run_number }}"